{"version":3,"sources":["webpack:///webpack/bootstrap 6c99c7f49fea4cc646bd","webpack:///./source/index.js","webpack:///./source/ImmutableStore.js","webpack:///external {\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"amd\":\"immutable\",\"root\":\"Immutable\"}"],"names":[],"mappings":"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","file":"immutable-js-store.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6c99c7f49fea4cc646bd\n **/","export default from './ImmutableStore'\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/index.js\n **/","import Immutable from 'immutable'\n\n/**\n * Tiny observable wrapper around Immutable JS with rewind/replay support.\n * Use normal Immutable JS methods to update the store.\n * Subscribe to be notified of changes.\n */\nexport default class ImmutableStore {\n  constructor (initialData = {}) {\n    const initialState = Immutable.fromJS(initialData)\n\n    this._history = [initialState]\n    this._historyIndex = 0\n    this._subscribers = []\n\n    // Setup proxy READ methods; these have no side effects.\n    IMMUTABLE_READ_METHODS.forEach((method) => {\n      this[method] = (...args) => {\n        const state = this.getState()\n\n        return state[method](...args)\n      }\n    })\n\n    // Setup proxy WRITE methods; these update the inner store and notify subscribers.\n    IMMUTABLE_WRITE_METHODS.forEach((method) => {\n      this[method] = (...args) => {\n        const state = this.getState()\n        const newState = state[method](...args)\n\n        // If we have stepped back to a previous state and an update is received-\n        // We should disregard the \"newer\" state.\n        if (this._historyIndex < this._history.length - 1) {\n          this._history.splice(this._historyIndex + 1)\n        }\n\n        this._history.push(newState)\n        this._historyIndex++\n\n        if (state !== newState) {\n          this._notifySubscribers()\n        }\n\n        return newState\n      }\n    })\n  }\n\n  clearHistory () {\n    const state = this.getState()\n\n    this._history = [state]\n    this._historyIndex = 0\n  }\n\n  getState () {\n    return this._history[this._historyIndex]\n  }\n\n  hasNext () {\n    return this._historyIndex < this._history.length - 1\n  }\n\n  hasPrevious () {\n    return this._historyIndex > 0\n  }\n\n  jumpToEnd () {\n    return this._jumpTo(this._history.length - 1)\n  }\n\n  jumpToStart () {\n    return this._jumpTo(0)\n  }\n\n  stepBack () {\n    return this._jumpTo(this._historyIndex - 1)\n  }\n\n  stepForward () {\n    return this._jumpTo(this._historyIndex + 1)\n  }\n\n  /**\n   * Subscribe to store changes.\n   * Subscribers will be passed a reference to the current store-state when updates are made.\n   * Stepping backwards or forward will notify subscribers of the updated \"current\" state.\n   */\n  subscribe (subscriber) {\n    this._subscribers.push(subscriber)\n\n    return () => this._unsubscribe(subscriber)\n  }\n\n  /**\n   * Memoized subscription to a specific path in the Immutable store.\n   * Subscribers will be passed the value contained at the specified path within the current store-state.\n   */\n  subscribeIn (path, subscriber) {\n    let cached = this.getIn(path)\n\n    return this.subscribe((state) => {\n      const value = state.getIn(path)\n\n      if (cached !== value) {\n        cached = value\n\n        subscriber(value)\n      }\n    })\n  }\n\n  _jumpTo (index) {\n    index = Math.min(Math.max(index, 0), this._history.length - 1)\n\n    if (this._historyIndex !== index) {\n      this._historyIndex = index\n\n      this._notifySubscribers()\n\n      return this.getState()\n    }\n  }\n\n  _notifySubscribers () {\n    const state = this.getState()\n\n    // @TODO Should I catch Errors and do anything with them?\n    this._subscribers.forEach(\n      (subscribed) => subscribed(state)\n    )\n  }\n\n  _unsubscribe (subscriber) {\n    this._subscribers = this._subscribers.filter(\n      (subscribed) => subscribed !== subscriber\n    )\n  }\n}\n\n// Immutable JS methods to proxy\nconst IMMUTABLE_WRITE_METHODS = [\n  'delete',\n  'deleteIn',\n  'merge',\n  'mergeDeep',\n  'mergeDeepIn',\n  'mergeIn',\n  'remove',\n  'removeIn',\n  'set',\n  'setIn',\n  'update',\n  'updateIn'\n]\nconst IMMUTABLE_READ_METHODS = [\n  'get',\n  'getIn'\n]\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/ImmutableStore.js\n **/","module.exports = require(\"immutable\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"amd\":\"immutable\",\"root\":\"Immutable\"}\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}